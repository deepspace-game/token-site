<html>
<head>
<title>DeepSpace Dash Client Test</title>
<script src="https://d3js.org/d3.v7.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.5.1/chart.min.js"></script>
<script>
	let xhr = new XMLHttpRequest();
	xhr.open('GET', "https://token.deepspace.game/api");
	xhr.send();

	var respond;
	var tokenName = "";
	var tokenSymbol = "";
	var tokenContract = "";
	var totalBurned = "";
	var launchDate = "";
	var price ="";
	var volume = "";
	var holders = "";
	var totalSupply = "";
	var marketCap = "";
	var followers = "";
	var maximumSupply = "";
	var circulatingSupply = "";
	var totalLiquidity = "";
	var liquidityRatio = "";
	var totalTransactions = "";
	var divisor = "";
	var shortDesc = "";
	var longDesc = "";
	var lastUpdated = "";
	var logoList = "";
	var keyWalletListList = "";
	var burnAddress = "";
	var explorerLink = "";

	largeFormat = d3.format(",.0f");
	largeFormatDecimal = d3.format(",.2f");
	largeFormatPercentage = d3.format(",.4f");
	
	xhr.onreadystatechange = function() {
		if (xhr.readyState === 4) {
		  var data = xhr.response;
		  tokenData = JSON.parse(data);
		  console.log(tokenData);
		  tokenName = tokenData["name"];
		  tokenSymbol = tokenData["symbol"];
		  tokenContract = tokenData["contract"];
		  explorerLink = tokenData["explorer_link"];
		  launchDate = tokenData["launch_date"];
		  totalBurned = tokenData["burned"];
		  tokenPrice = tokenData["price"];
		  holders = tokenData["holders"];
		  marketCap = tokenData["market_cap"];
		  volume = tokenData["volume"];
		  totalSupply = tokenData["total_supply"];
		  followers = tokenData["social_score"];
		  maximumSupply = tokenData["maximum_supply"];
		  circulatingSupply = tokenData["circulating_supply"];
		  totalLiquidity = tokenData["total_liquidity"];
		  liquidityRatio = tokenData["liquidity_ratio"];
		  totalTransactions = tokenData["total_transactions"];
		  divisor = tokenData["divisor"];
		  shortDesc = tokenData["short_description"];
		  longDesc = tokenData["long_description"];
		  logoList = tokenData["logo_list"];

		  for (let i = 0; i < logoList.length; i++) {
		  	logoSize = logoList[i]["logo_size"];
		  	logoUrl = logoList[i]["logo_url"];
		  	}
		
		  keyWalletListList = tokenData["key_wallet_list"];

		  for (let i = 0; i < keyWalletListList.length; i++) {
		  	walletAddress = keyWalletListList[i]["address"];
		  	walletTag = keyWalletListList[i]["tag"];
			walletOwner = keyWalletListList[i]["owner"];
			walletStatus = keyWalletListList[i]["status"];
			excludeCirculatingSupply = keyWalletListList[i]["exclude_circulating_supply"];
			walletBalance = keyWalletListList[i]["balance"];
			percentageNetwork = keyWalletListList[i]["percentage"];
			walletLink = keyWalletListList[i]["explorer_link"];
		  }
			
		  burnAddress = tokenData["burn_address"];
		  lastUpdated = tokenData["last_updated"];
		}
	}
</script>
</head>
<body>
<h1>DeepSpace Dash Client Test</h1>
<br>
<canvas id="myChart" width="400" height="400"></canvas>
<script>
var ctx = document.getElementById('myChart');
var myChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
        datasets: [{
            label: '# of Votes',
            data: [12, 19, 3, 5, 2, 3],
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});
</script>
</body>
</html>
